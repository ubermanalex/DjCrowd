<!DOCTYPE HTML>
<!--
javascript read width and height
css set hX defaultwise
javascript put div at h/2+??; w/2+??
-->
<head>
	<meta charset="utf-8"/>
	<meta author="Gruppe 1"/>
	<title>DjCrowd</title>
	<link href="style.css" type="text/css" rel="stylesheet">
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.css" />
	<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.js"></script>
	<script type="text/javascript" src="utility.js"></script>
	<meta name="viewpoint" content="width=device-width,initial-scale=1,maximum-scale=1"/>
	<script>
		//document.addEventListener("deviceready", onDeviceReady, false);
		
         var sock = null;
         var wsuri = "ws://localhost:9034";
		
		window.onload = function() {
 
            sock = new WebSocket(wsuri);
 
            sock.onopen = function() {
               console.log("connected to " + wsuri);
            }
 
            sock.onclose = function(e) {
               console.log("connection closed (" + e.code + ")");
               document.getElementById('chat').innerHTML+='<br>connection closed (' + e.code + ')';
            }
 
            sock.onmessage = function(e) {
               console.log("message received: " + e.data);
               document.getElementById('chat').innerHTML='<br>'+e.data;
            }
         };	/*alert("yo");
			 $("#content").load("home.html", function() {
			 });
			 $.get('home.html', function (response){
			 var myHtml = $('#homecontent', response);
			 $('#content').html(response);
			 });*/

		function loadhome(username) {

			/*TEST:*/
			var users = new Array();
			users.push('Heide');
			users.push('Frauberg');
			//alert(users);
			/*:TEST*/
			if (username == "") {
				alert("Bitte einen Nutzernamen eingeben.");
			} else if (users.indexOf(username) != -1) {
				alert("Nutzername bereits vergeben.");
			} else {

				document.getElementById('headeruser').innerHTML = username;

				sock.send('USERNAME: '+username);

				$("#content").load("home.html", function() {
				});
			}

		}
	</script>
</head>

<body>

	<div data-role="page" id="index">

		<header>
			<div data-theme="a" data-role="header" id="header">
				<h3 id="headeruser"> DjCrowd </h3>
			</div>
		</header>

		<div data-role="content" id="content">
			<h2> Willkommen bei
			<br>
			DjCrowd </h2>
			<div data-role="fieldcontain">
				<label for="usernameinput" id="tests"> Nutzername </label>
				<input name="" id="usernameinput" placeholder="Hier Nutzernamen eingeben"
				value="" type="text" onkeyup="check(usernameinput.value,12,usernameinput)">
			</div>
			<input value="Get the Party started !" type="submit" onclick="loadhome(usernameinput.value)">

		</div>

		<div id="chat">

		</div>

		<footer data-role="footer" data-position="fixed">
			<nav data-role="navbar">
				<ul>
					<li>
						<a href="#" data-icon="home">home</a>
					</li>
					<li>
						<a href="#" data-icon="gear">options</a>
					</li>
					<li>
						<a href="#" data-icon="info">info</a>
					</li>
				</ul>
			</nav>
		</footer>
	</div>
</body>
</html>